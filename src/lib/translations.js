/**
 * 翻譯模組 - 管理多語言翻譯資料和翻譯函式
 * @module translations
 */

/**
 * 翻譯資料物件
 * 包含 'en' (英文) 和 'zh-TW' (繁體中文) 兩種語言
 */
export const translations = {
  en: {
    title: "File Converter",
    appName: "UniConvert",
    selectFiles: "Select Files",
    start: "Start Convert",
    startAll: "Start All",
    startGroup: "Start",
    workspace: "Workspace",
    selectAction: "Please select files to view available actions",
    currentAction: "Current Action",
    dragDrop: "Drag files here",
    dragDropDesc: "Supports images, PDF, audio and video files",
    settings: "Settings",
    about: "About",
    supportedFormats: "Supported Formats",
    formats_images: "Images: PNG, JPG, JPEG, HEIC, WEBP, BMP, GIF, TIFF, ICO -> PNG, JPG, WEBP, ICO, BMP, GIF, TIFF, PDF (Merge)",
    formats_documents: "Documents: PDF -> PNG, JPG (Split Pages)",
    formats_markdown: "Markdown: MD -> PDF",
    formats_video: "Video: MP4, MOV, AVI, MKV -> MP4, MOV, MP3 (Extract)",
    formats_audio: "Audio: MP3, WAV, M4A -> MP3, WAV, M4A",
    theme: "Theme",
    language: "Language",
    outputLocation: "Output Location",
    sourceLocation: "Original File Location",
    customFolder: "Custom Folder",
    selectFolder: "Select Folder",
    light: "Light",
    dark: "Dark",
    system: "System",
    files: "files",
    ready: "Ready",
    waiting: "Waiting",
    processing: "Processing...",
    completed: "Completed",
    success: "Success",
    fail: "Fail",
    error: "Error",
    fileName: "File Name",
    size: "Size",
    action: "Action",
    apiError: "API not loaded",
    selectFail: "Failed to select files",
    selectActionFirst: "Please select files and action first",
    executing: "Executing...",
    execFail: "Execution failed",
    conversionComplete: "Conversion Complete",
    filesConverted: "files converted successfully",
    conversionFailed: "Conversion Failed",
    partialSuccess: "Partial Success",
    someFilesFailed: "Some files failed to convert",
    conversion_success: "Conversion successful",
    // 類型翻譯
    typeImage: "Images",
    typeVideo: "Videos",
    typeAudio: "Audio",
    typeDocument: "Documents",
    typeMarkdown: "Markdown",
    recommended: "Rec",
    more: "More",
    clearAll: "Clear All",
    noFiles: "No files added",
    openFolderAfterConversion: "Open folder after conversion",
    discordRPC: "Discord Rich Presence",
    discordRPCDesc: "Show current activity status on Discord",
    contextMenu: "Windows Context Menu",
    contextMenuDesc: "Add 'Open with Uniconvert' to right-click menu",
    contextMenuRegistering: "Registering...",
    contextMenuUnregistering: "Removing...",
    filesAdded: "files added",
    version: "Version",
    author: "Author",
    copyright: "Copyright",
    license: "License",
    sourceCode: "Source Code",
    reportIssue: "Report Issue",
    website: "Website",
    techStack: "Technology Stack",
    description: "A universal file converter for images, videos, audio and documents.",
    openSource: "Open Source",
    viewOnGitHub: "View on GitHub",
    submitFeedback: "Submit Feedback",
    builtWith: "Built with",
    // History 相關翻譯
    history: "History",
    filterAll: "All",
    records: "records",
    noHistory: "No History",
    noHistoryDesc: "Your conversion history will appear here",
    openLocation: "Open Location",
    reconvert: "Re-convert",
    delete: "Delete",
    refresh: "Refresh",
    confirm: "Confirm",
    cancel: "Cancel",
    actions: {
      '合併圖片為PDF': 'Merge Images to PDF',
      '批量轉PNG': 'Batch to PNG',
      '批量轉JPG': 'Batch to JPG',
      '批量轉WEBP': 'Batch to WEBP',
      '批量轉ICO': 'Batch to ICO',
      '批量轉BMP': 'Batch to BMP',
      '批量轉GIF': 'Batch to GIF',
      '批量轉TIFF': 'Batch to TIFF',
      'PDF每頁轉PNG': 'PDF Pages to PNG',
      'PDF每頁轉JPG': 'PDF Pages to JPG',
      '批量轉MP4': 'Batch to MP4',
      '批量轉MOV': 'Batch to MOV',
      '批量轉/提取MP3': 'Batch to/Extract MP3',
      '批量轉MP3': 'Batch to MP3',
      '批量轉WAV': 'Batch to WAV',
      '批量轉M4A': 'Batch to M4A',
      'Markdown轉PDF': 'Markdown to PDF'
    }
  },
  "zh-TW": {
    title: "檔案轉換",
    appName: "UniConvert",
    selectFiles: "選擇檔案",
    start: "開始轉換",
    startAll: "全部開始",
    startGroup: "開始",
    workspace: "工作區",
    selectAction: "請選擇檔案以檢視可用操作",
    currentAction: "目前操作",
    dragDrop: "拖曳檔案到此處",
    dragDropDesc: "支援圖片、PDF、音訊與影片檔案",
    settings: "設定",
    about: "關於",
    supportedFormats: "支援格式",
    formats_images: "圖片: PNG, JPG, JPEG, HEIC, WEBP, BMP, GIF, TIFF, ICO -> PNG, JPG, WEBP, ICO, BMP, GIF, TIFF, PDF (合併)",
    formats_documents: "文件: PDF -> PNG, JPG (每頁拆分)",
    formats_markdown: "Markdown: MD -> PDF",
    formats_video: "影片: MP4, MOV, AVI, MKV -> MP4, MOV, MP3 (提取音訊)",
    formats_audio: "音訊: MP3, WAV, M4A -> MP3, WAV, M4A",
    theme: "主題",
    language: "語言",
    outputLocation: "儲存位置",
    sourceLocation: "原始檔案位置",
    customFolder: "自訂資料夾",
    selectFolder: "選擇資料夾",
    light: "淺色",
    dark: "深色",
    system: "系統預設",
    files: "個檔案",
    ready: "準備就緒",
    waiting: "等待操作",
    processing: "執行中...",
    completed: "完成",
    success: "成功",
    fail: "失敗",
    error: "錯誤",
    fileName: "檔案名稱",
    size: "大小",
    action: "操作",
    apiError: "API 未載入",
    selectFail: "選擇檔案失敗",
    selectActionFirst: "請先選擇檔案與操作",
    executing: "執行中...",
    execFail: "執行失敗",
    conversionComplete: "轉換完成",
    filesConverted: "個檔案轉換成功",
    conversionFailed: "轉換失敗",
    partialSuccess: "部分成功",
    someFilesFailed: "部分檔案轉換失敗",
    conversion_success: "轉換成功",
    // 類型翻譯
    typeImage: "圖片",
    typeVideo: "影片",
    typeAudio: "音訊",
    typeDocument: "文件",
    typeMarkdown: "Markdown",
    recommended: "推薦",
    more: "更多",
    clearAll: "清除全部",
    noFiles: "尚未加入檔案",
    openFolderAfterConversion: "轉換後自動開啟資料夾",
    discordRPC: "Discord Rich Presence",
    discordRPCDesc: "在 Discord 顯示目前活動狀態",
    contextMenu: "Windows 右鍵選單",
    contextMenuDesc: "在右鍵選單加入「以 Uniconvert 開啟」",
    contextMenuRegistering: "註冊中...",
    contextMenuUnregistering: "移除中...",
    filesAdded: "個檔案已加入",
    version: "版本",
    author: "作者",
    copyright: "版權",
    license: "授權",
    sourceCode: "原始碼",
    reportIssue: "回報問題",
    website: "網站",
    techStack: "技術棧",
    description: "一款通用檔案轉換器，支援圖片、影片、音訊與文件轉換。",
    openSource: "開放原始碼",
    viewOnGitHub: "在 GitHub 上查看",
    submitFeedback: "提交意見回饋",
    builtWith: "使用技術",
    // History 相關翻譯
    history: "歷史記錄",
    filterAll: "全部",
    records: "筆記錄",
    noHistory: "沒有歷史記錄",
    noHistoryDesc: "您的轉換歷史記錄將顯示在這裡",
    openLocation: "開啟位置",
    reconvert: "重新轉換",
    delete: "刪除",
    refresh: "重新整理",
    confirm: "確認",
    cancel: "取消",
    actions: {
      '合併圖片為PDF': '合併圖片為PDF',
      '批量轉PNG': '批量轉PNG',
      '批量轉JPG': '批量轉JPG',
      '批量轉WEBP': '批量轉WEBP',
      '批量轉ICO': '批量轉ICO',
      '批量轉BMP': '批量轉BMP',
      '批量轉GIF': '批量轉GIF',
      '批量轉TIFF': '批量轉TIFF',
      'PDF每頁轉PNG': 'PDF每頁轉PNG',
      'PDF每頁轉JPG': 'PDF每頁轉JPG',
      '批量轉MP4': '批量轉MP4',
      '批量轉MOV': '批量轉MOV',
      '批量轉/提取MP3': '批量轉/提取MP3',
      '批量轉MP3': '批量轉MP3',
      '批量轉WAV': '批量轉WAV',
      '批量轉M4A': '批量轉M4A',
      'Markdown轉PDF': 'Markdown轉PDF'
    }
  }
}

/**
 * 根據瀏覽器語言判斷有效語言
 * @param {string} browserLanguage - 瀏覽器語言代碼
 * @returns {string} 有效語言代碼 ('en' | 'zh-TW')
 */
export function detectLanguageFromBrowser(browserLanguage) {
  return browserLanguage.startsWith('zh') ? 'zh-TW' : 'en'
}

/**
 * 取得有效語言
 * 當語言設定為 'system' 時，根據瀏覽器語言自動判斷
 * @param {string} language - 語言設定 ('system' | 'en' | 'zh-TW')
 * @param {string} [browserLanguage] - 瀏覽器語言代碼（可選，用於測試）
 * @returns {string} 有效語言代碼 ('en' | 'zh-TW')
 */
export function getEffectiveLanguage(language, browserLanguage) {
  if (language === 'system') {
    const lang = browserLanguage ?? (typeof navigator !== 'undefined' ? navigator.language : 'en')
    return detectLanguageFromBrowser(lang)
  }
  return language
}
